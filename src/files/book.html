<!DOCTYPE hmtl>
    <html>
        <head> 
        <meta charset="utf-8">
        <link href="maincss.css" rel="stylesheet">
        <title>Книга</title>
        <style>
            #bookInfo {
                display: flex;
                align-items: flex-start;
            }
            #bookInfo img {
                width: 40%; 
                height: auto;
            }
            #bookInfo > div {
                margin-left: 20px; 
            }
            #bookDetails {
                text-align: right;
            }
            #bookDetails {
    text-align: left;
}
        </style>
        </head>
    <body>
        <header>
            <div id="logo"><h1>MyLogo</h1></div>
            <div class="search">
                <input type="text" placeholder="">
                <button>Пошук</button>
            </div>
            <div id="log">
                <button id="logButton">Вхід в аккаунт</button>
            </div>
        </header>
        <main id="body-content">
                <nav id ="nav-flex">
                    <nav id ="navitem1">
                        <ul>
                            <li><a href="main.html">Главная</a></li>
                            <li><a href="#">Контакти</a></li>
                            <li><a href="#">Про сайт</a></li>
                        </ul>
                    </nav>
                    <h3>Теги фільтра</h3>
                    <article id ="comm"><div id="filters">
                        <label><p><input type="checkbox" class="tag-filter" value="Програмування"> Програмування</label></p>
                        <label><p><input type="checkbox" class="tag-filter" value="Філософія"> Філософія</label></p>
                        <label><p><input type="checkbox" class="tag-filter" value="Наукова-фантастика"> Наукова-фантастика</label></p>
                        <label><p><input type="checkbox" class="tag-filter" value="Історія"> Історія</label></p>
                        <label><p><input type="checkbox" class="tag-filter" value="Детектив"> Детектив</label></p>
                    </div></article>
                </nav>
                <div id="article">
                    <div class="book-info" id="bookInfo">
                        <img id="bookImage" src="" alt="Обложка книги">
                        <div id="bookDetails">
                            <h2 id="bookTitle"></h2>
                            <p id="bookTag"></p> 
                            <p id="bookAuthor"></p>
                            <p id="bookDescription"></p>
                            <audio id="audioPlayer" controls>
                                <source src="" type="audio/mp3">
                                Ваш браузер не поддерживает аудио.
                            </audio>
                        </div>
                    <script>
                      function getParameterByName(name, url) {
                        if (!url) url = window.location.href;
                        name = name.replace(/[\[\]]/g, '\\$&');
                        const regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),
                          results = regex.exec(url);
                        if (!results) return null;
                        if (!results[2]) return '';
                        return decodeURIComponent(results[2].replace(/\+/g, ' '));
                      }
                      const bookId = getParameterByName('id');
                      fetch(`/books/${bookId}`)
                    .then(response => response.json())
                    .then(book => {
                        const bookTitle = document.getElementById('bookTitle');
                        const bookTag = document.getElementById('bookTag');
                        const bookAuthor = document.getElementById('bookAuthor');
                        const bookDescription = document.getElementById('bookDescription');
                        const bookImage = document.getElementById('bookImage');
                        const audioPlayer = document.getElementById('audioPlayer'); 
                        bookTitle.textContent = book.name;
                        bookAuthor.textContent = `Автор: ${book.author}`;
                        bookTag.textContent = `Тег: ${book.tag}`;
                        bookDescription.textContent = `Описание: ${book.description}`;
                        bookImage.src = book.imagePath;
                        if (book.audioPath) {
                        audioPlayer.src = book.audioPath; 
                        audioPlayer.style.display = 'block'; 
                        } else {
                        audioPlayer.style.display = 'none'; 
                        }
                    })
                    .catch(error => console.error('Ошибка получения данных:', error));
                    </script>
                </div>
            </div>
            <aside class="sidebar2">    
                <div id = "top1">
                    <h2>Найкращі книги </h2>
                    <p>на думку читачів</p>
                    <div class = "top1top"> </div>
                </div>
                <div id = "top2">
                    <h2>Найкращі аудиокниги</h2>
                    <p>на думку читачів</p>
                    <div class = "top1top"> </div>
                </div>
            </aside>
        </main>
        <script>
            var button = document.getElementById("logButton");
             var tURL = "login.html";
            button.addEventListener("click", function(){
            window.location.href = window.location.origin + '/' + tURL;
            });
        </script>
    </body>
</html>